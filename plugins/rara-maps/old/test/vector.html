<!-- Flat vector map -->

<html>
  <head>
    <script src='https://unpkg.com/maplibre-gl@5.13.0/dist/maplibre-gl.js'></script>
    <script src='https://unpkg.com/@turf/turf@6/turf.min.js'></script>
    <link href='https://unpkg.com/maplibre-gl@5.13.0/dist/maplibre-gl.css' rel='stylesheet' />
    <link href='style.css' rel='stylesheet' />
    <script src='./src/page.js'></script>

    <!-- Inject base URL into library -->
    <script src='./src/data.js'></script>

    <script src='../../node_modules/rara-maps/build/bundle.js'></script>

    <script type="module">
      import { createToolbar } from "./src/toolbar.js";
      createToolbar('vector');

      const imageElem = document.getElementById("image");
      var map = null;

      const images = {
        "riverside_boulevard": "./images/boulevard_3.jpg",
        "elizabeth_way_underpass": "./images/elizabeth_way_underpass.png",
        "elizabeth_way_bridge": "./images/elizabeth_way_under_bridge.jpg",
        "stourbridge_common_approach": "./images/stourbridge_common_approach.png",
        "river_festival": "./images/river_festival_3.png",
        "newmarket_road": "./images/newmarket_road.png",
        "mercers_row": "./images/mercers_row.png",
        "stourbridge_common": "./images/stourbridge_common.png",
        "st_andrew_the_less": "https://standrewtheless.org/standrewthelesscommunityproject/test/images/st-andrew-the-less-newmarket-r",
        "leper_chapel": "./images/leper_chapel.png",
        "cellarers_chequer": "./images/cellarers_chequer.png",
        "abbey_house": "./images/abbey_house.jpg",
        "cmot": "./images/cmot.jpg",
        "emailerator": "./images/emailerator.jpg",
        "war_memorial": "./images/war_memorial.png",
        "flying_saucer": "./images/flying_saucer.jpg",
        "equiano_bridge": "./images/equiano_bridge.png",
        "engineers_house": "./images/engineers_house.webp",
        "kerb_kollective": "./images/kerb_kollective.png",
        "logans_meadow": "./images/logans_meadow.png"
      };

      import { absUrl } from "../plugins/rara-maps/lib/util/url.js";
      function onMouseEnter(id) {
        imageElem.src = images[id] ?? null;
      }

      map = raraMaps.vectorCreateMap({
        overlay_opacity: 0.75,
        locationOnEnter: onMouseEnter,
        locationVisible: true,
      });

      import { Info } from "./src/info.js";
      const info = new Info( {
        map,
      } );
    </script>
  </head>

  <body>
    <header id="foo" class="site-header">
      <div id="toolbar" class="toolbar"></div>
    </header>

    <div id="content" class="site-content">
      <div id="map" class="map expand"></div>
      <nav id="menu" hidden=true></nav>
    </div>

    <footer class="site-footer"></footer>

    <pre id="info" style="display: none;"></pre>
  </body>
</html>
